<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Product Detail</title>
    <link href="css/Style.css" rel="stylesheet"> 
</head>
<body>
    <main>
        <div class="detail-container">
            <a href="javascript:history.back()" class="back-arrow">&#8592; Back</a>
            <div class="detail-card">
                <div class="detail-img-container">
                    <img id="detail-image" src="" alt="Product Image" />
                </div>
                <div class="details">
                    <div class="title" id="product-name"></div>
                    <div class="price" id="product-price"></div>
                    <div class="condition" id="product-condition"></div>
                    <div class="description" id="product-description"></div>
                    <div class="location" id="product-location"></div>
                    <label for="quantity">Quantity:</label>
                    <select id="quantity" class="quantity-selector"></select>
                    <button class="add-to-cart">Add to Cart</button>
                </div>
            </div>
        </div>
    </main>


    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const productID = urlParams.get('id');

        fetch('products.json')
        .then(response => response.json())
        .then(data => {
            const product = data.find(p => p.productID === productID);
            if (product) {
                document.getElementById('detail-image').src = product.photosurl;
                document.getElementById('product-name').textContent = product.name;
                document.getElementById('product-price').textContent = `S$${product.price.toFixed(2)}`;
                document.getElementById('product-condition').textContent = `Condition: ${product.condition}`;
                document.getElementById('product-description').textContent = `Description: ${product.description || 'No description available.'}`;
                document.getElementById('product-location').textContent = `Location: ${product.location}`;
                
                const quantitySelect = document.getElementById('quantity');
                const availableStock = product.stock;
                const maxQuantity = availableStock < 3 ? availableStock : 3;  // If stock is less than 3, use that as max

                for (let i = 1; i <= maxQuantity; i++) {
                    let option = document.createElement('option');
                    option.value = i;
                    option.textContent = i;
                    quantitySelect.appendChild(option);
                }

                if (availableStock === 0) {
                    quantitySelect.disabled = true;  // Disable quantity selector if no stock
                    document.querySelector('.add-to-cart').disabled = true; // Disable 'Add to Cart' button
                }
                } else {
                    document.getElementById('product-detail').innerHTML = '<p>Product not found.</p>';
                }
            })
        .catch(error => console.error('Error loading product data:', error));
    </script>
    <script src="js/script.js"></script>
</body>
</html>
